{"componentChunkName":"component---src-templates-blog-post-js","path":"/atWork/wait-for-DOM/","result":{"data":{"site":{"siteMetadata":{"title":"Today I Learned...","author":"장호현","siteUrl":"https://guest-01.github.io/TIL","comment":{"disqusShortName":"","utterances":"Guest-01/blog-comments"},"sponsor":{"buyMeACoffeeId":""}}},"markdownRemark":{"id":"acbb0276-63a3-5fec-8236-906f22be35a0","excerpt":"오늘은 저희가 유통하고 있는 F5 솔루션을 사용하고있는 고객사에서 한번 로그인 후에는 방문 시 자동으로 로그인이 되도록 해달라는 요청을 받았습니다. 여러 보안상의 문제가 우려되지만 우선 가능한 방법이 있다면 적용해주는 것으로 내부 결정이 되었습니다. F5 솔루션은 웹커스터마이징이라는 이름으로 자신들의 WebUI에 사용자 정의 스크립트를 붙일 수 있게 해줍니다. 이 웹커스터마이징을 이용해서 자바스크립트로 요구사항을 구현해야합니다. 우선, 엔지니어께서 F…","html":"<p>오늘은 저희가 유통하고 있는 F5 솔루션을 사용하고있는 고객사에서 한번 로그인 후에는 방문 시 자동으로 로그인이 되도록 해달라는 요청을 받았습니다.</p>\n<p>여러 보안상의 문제가 우려되지만 우선 가능한 방법이 있다면 적용해주는 것으로 내부 결정이 되었습니다.</p>\n<p>F5 솔루션은 웹커스터마이징이라는 이름으로 자신들의 WebUI에 사용자 정의 스크립트를 붙일 수 있게 해줍니다. 이 웹커스터마이징을 이용해서 자바스크립트로 요구사항을 구현해야합니다.</p>\n<p>우선, 엔지니어께서 F5 서버의 설정을 통해 이전에 입력하였던 사용자 ID/PW를 쿠키로 내려줄 수 있다고 합니다. 때문에 굳이 처음에 ID/PW를 자바스크립트로 가져와서 저장할 필요는 없고, 쿠키에서 읽어와서 입력 및 폼 제출만 자바스크립트로 해주면 됩니다.</p>\n<p>로그인은 전형적인 <code class=\"language-text\">&lt;form></code> 제출로 이뤄지기 때문에, 절차는 간단하게 아래와 같습니다.</p>\n<ol>\n<li><code class=\"language-text\">cookie</code>에서 이전에 입력한 ID/PW 가져오기</li>\n<li><code class=\"language-text\">username</code>과 <code class=\"language-text\">password</code> <code class=\"language-text\">&lt;input></code>의 <code class=\"language-text\">value</code>에 넣기</li>\n<li><code class=\"language-text\">form.submit()</code>하기</li>\n</ol>\n<p>문제는 <code class=\"language-text\">&lt;input></code>과 <code class=\"language-text\">&lt;form></code> 태그를 가져오려 했지만 <code class=\"language-text\">null</code>값이 반환되었다는 것입니다.</p>\n<p>분명 개발자도구를 통해 봤을 때는 해당 요소들이 있었는데, 다시 <code class=\"language-text\">source</code>보기를 통해 확인해보니 F5 웹은 자체적인 SPA 프레임워크를 이용해 페이지를 렌더링하고 있었습니다. 즉 <code class=\"language-text\">React</code>나 <code class=\"language-text\">Vue</code>처럼 처음에는 빈 HTML에서 시작해서 자바스크립트로 각종 input과 form을 그리고 있었던 것입니다.</p>\n<p>그리고 제가 삽입한 script는 렌더링이 되기전에 실행되어버려서 해당 태그를 찾을 수 없었던 것입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token doctype\"><span class=\"token punctuation\">&lt;!</span><span class=\"token doctype-tag\">DOCTYPE</span> <span class=\"token name\">html</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>html</span> <span class=\"token attr-name\">lang</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>ko<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>head</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span> <span class=\"token attr-name\">charset</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>UTF-8<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span> <span class=\"token attr-name\">http-equiv</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>X-UA-Compatible<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">content</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>IE=Edge<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>viewport<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">content</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>width=device-width, initial-scale=1<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>robots<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">content</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>noindex,nofollow<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>link</span> <span class=\"token attr-name\">rel</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>stylesheet<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/public/include/css/modern/framework.css?q=1649477949<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text/javascript<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/public/include/js/modern/loader.js?q=1649477949<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token script\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text/javascript<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/public/include/js/modern/main.js?q=1649477949<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token script\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text/javascript<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\">\n    <span class=\"token keyword\">function</span> <span class=\"token function\">init</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">apmui</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">var</span> appLoader <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">apmui<span class=\"token punctuation\">.</span>AppLoader</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        appLoader<span class=\"token punctuation\">.</span><span class=\"token function\">configure</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    <span class=\"token string\">\"pageType\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"logon\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"source\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"/Common/modern\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"styles\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"scripts\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token string\">\"/public/include/js/modern/user-logon.js?cg_code=22ed887969b58abee4cd97df8feddd5b&amp;cg_name=n8h5bofZ1W9V6H1P4a0Auk_iaxJPaAJMZycBJq0xRtvVzCNQbEk-4zhhmrtx3xde\"</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"logon\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token string\">\"softToken\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token string\">\"fieldName\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"state\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"newPin\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"form\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token string\">\"id\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"auth_form\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"title\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"F5 Networks \\ubcf4\\uc548 \\ub85c\\uadf8\\uc628\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"submitCaption\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"\\ub85c\\uadf8\\uc628\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"savePassword\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"\\uc554\\ud638 \\uc800\\uc7a5\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"passwordVerifyDontMatch\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"\\uc785\\ub825\\ud558\\uc2e0 \\uc554\\ud638\\uac00 \\uc77c\\uce58\\ud558\\uc9c0 \\uc54a\\uc2b5\\ub2c8\\ub2e4.\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">\"fields\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n                <span class=\"token punctuation\">{</span>\n                    <span class=\"token string\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"text\"</span><span class=\"token punctuation\">,</span>\n                    <span class=\"token string\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"username\"</span><span class=\"token punctuation\">,</span>\n                    <span class=\"token string\">\"caption\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"\\uc0ac\\uc6a9\\uc790 \\uc774\\ub984\"</span><span class=\"token punctuation\">,</span>\n                    <span class=\"token string\">\"value\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span>\n                    <span class=\"token string\">\"disabled\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span>\n                <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n                <span class=\"token punctuation\">{</span>\n                    <span class=\"token string\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"password\"</span><span class=\"token punctuation\">,</span>\n                    <span class=\"token string\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"password\"</span><span class=\"token punctuation\">,</span>\n                    <span class=\"token string\">\"caption\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"\\uc554\\ud638\"</span><span class=\"token punctuation\">,</span>\n                    <span class=\"token string\">\"value\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span>\n                    <span class=\"token string\">\"disabled\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span>\n                <span class=\"token punctuation\">}</span>\n            <span class=\"token punctuation\">]</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">// ...생략</span>\n    </span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>head</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span> <span class=\"token special-attr\"><span class=\"token attr-name\">onload</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span><span class=\"token value javascript language-javascript\">javascript<span class=\"token operator\">:</span> <span class=\"token function\">__run</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"token punctuation\">\"</span></span></span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>html</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<blockquote>\n<p>위처럼 <code class=\"language-text\">body</code>가 <code class=\"language-text\">onload</code>되었을 때 자바스크립트 함수를 실행하면서 렌더링이 되고 있습니다.</p>\n</blockquote>\n<p>그래서 처음에는 <code class=\"language-text\">DOMContentLoaded</code>라는 이벤트에 리스너를 달아서 시도해보려고 했으나, 해당 이벤트는 그냥 빈 <code class=\"language-text\">body</code>태그가 생겼을 때 발생하는 것으로 확인되었습니다. 또한 제가 삽입한 스크립트 실행시점에는 호출되지 않는 것으로 보아, 해당 이벤트가 이미 발생한 후에 스크립트가 실행되는 것 같았습니다.</p>\n<p>이와 같이 SPA로 된 웹페이지에서 특정 DOM이 렌더링 된 이후에 작업을 하고 싶다면 어떻게 해야할까요?</p>\n<p>이럴 때는, <code class=\"language-text\">MutationObserver</code>를 사용하면 됩니다.</p>\n<ul>\n<li><a href=\"https://developer.mozilla.org/ko/docs/Web/API/MutationObserver\">MutationObserver MDN 설명</a></li>\n<li><a href=\"https://caniuse.com/?search=MutationObserver\">MutationObserver CanIUse</a></li>\n</ul>\n<p><code class=\"language-text\">MutationObserver</code>는 초기 생성자에서 mutation이 일어났을 때 무엇을 할지에 대한 함수를 받습니다. 그리고 <code class=\"language-text\">.observe()</code> 메소드를 통해 어떤 노드를 감시할 지 설정해줍니다.</p>\n<p>이를 우리의 목적대로 특정 DOM이 있을 때 사용하기 위해 사용하려면 아래와 같이 코드를 짜면 됩니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// Wait for HTMLElement to appear</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">waitForElm</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">selector</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">resolve</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span>selector<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">return</span> <span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span>selector<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token keyword\">const</span> observer <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">MutationObserver</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">mutations</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span>selector<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span>selector<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                observer<span class=\"token punctuation\">.</span><span class=\"token function\">disconnect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        observer<span class=\"token punctuation\">.</span><span class=\"token function\">observe</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n            childList<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n            subtree<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><code class=\"language-text\">waitForElm</code>이라는 함수는 Promise를 반환하는 비동기 함수로 내부에 <code class=\"language-text\">MutationObserver</code>를 생성하고 활용하고 있습니다. <code class=\"language-text\">document.body</code>를 감시하면서 변화가 생겼을 때 특정 <code class=\"language-text\">selector</code> 요소가 있다면 <code class=\"language-text\">resolve</code>를 반환합니다.</p>\n<p>그럼 이제 이 함수를 이용해서 우리가 원하는 작업을 아래와 같이 하면 됩니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// get auth from cookie and submit automatically, after form appear</span>\n<span class=\"token function\">waitForElm</span><span class=\"token punctuation\">(</span><span class=\"token string\">'#auth_form'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">form</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"form ready\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">var</span> usernameCookie <span class=\"token operator\">=</span> <span class=\"token function\">getCookie</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"cookiename\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>usernameCookie <span class=\"token operator\">===</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"No cookie found\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">var</span> pwCookie <span class=\"token operator\">=</span> <span class=\"token function\">getCookie</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"cookiepassword\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">var</span> usernameInput <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"username\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">var</span> pwInput <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"password\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    usernameInput<span class=\"token punctuation\">.</span>value <span class=\"token operator\">=</span> usernameCookie<span class=\"token punctuation\">;</span>\n    pwInput<span class=\"token punctuation\">.</span>value <span class=\"token operator\">=</span> pwCookie<span class=\"token punctuation\">;</span>\n\n    form<span class=\"token punctuation\">.</span><span class=\"token function\">submit</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>이렇게 코드를 짜면 <code class=\"language-text\">#auth_form</code>이라는 <code class=\"language-text\">id</code>의 <code class=\"language-text\">&lt;form></code> 태그가 화면에 존재할 경우에 <code class=\"language-text\">.then</code>이 실행됩니다. 여기서 우리가 원래하려고 했던, 쿠키로부터 ID/PW를 가져와서 input에 넣고 <code class=\"language-text\">form.submit()</code>을 제출하면 됩니다.</p>\n<h3 id=\"결론\" style=\"position:relative;\"><a href=\"#%EA%B2%B0%EB%A1%A0\" aria-label=\"결론 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>결론</h3>\n<p>오늘은 SPA 프레임워크 등을 사용해서 DOM이 늦게 렌더링 될 경우 특정 DOM이 나타난 이후에 작업을 하고 싶다면 어떻게 해야할지에 대해 알아보았습니다. <code class=\"language-text\">MutationObserver</code>라는 내장 함수가 있는지 처음 알게 되었고 간단하게 사용법도 알 수 있었습니다.</p>\n<p>이를 이용하면 제가 작성하지 않은 SPA 웹사이트에서 DOM 작업을 하기 수월해집니다.</p>","frontmatter":{"title":"특정 DOM이 나타난 이후에 작업하기","date":"November 15, 2022"}}},"pageContext":{"slug":"/atWork/wait-for-DOM/","previous":{"fields":{"slug":"/atWork/hide-pw-in-memory-2/"},"frontmatter":{"title":"비밀번호를 브라우저 메모리에서 숨기기 (2)"}},"next":{"fields":{"slug":"/atWork/overflow-in-table/"},"frontmatter":{"title":"테이블 셀 안의 내용이 너무 길 때"}}}}}